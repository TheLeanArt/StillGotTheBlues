; Super Game Boy Sound Mixer
;
; Copyright (c) 2025 Dmitry Shechtman


DEF FIELD_COUNT         EQU 16

DEF MIN_A_VOL           EQU  0
DEF MIN_A_PITCH         EQU  0
DEF MIN_B_VOL           EQU  1
DEF MIN_B_PITCH         EQU  0

DEF MAX_A_VOL           EQU  3
DEF MAX_A_PITCH         EQU  3
DEF MAX_B_VOL           EQU  3
DEF MAX_B_PITCH         EQU  3

DEF MAX_CH4_DIV         EQU $07
DEF MAX_CH4_PITCH       EQU $0F
DEF MAX_CH4_VOL         EQU $0F
DEF MAX_CH4_PACE        EQU $07

DEF DEF_CH4_LEN_HIGH    EQU  2
DEF DEF_CH4_LEN_LOW     EQU  1
DEF DEF_CH4_DIV         EQU  0

DEF ROW_A_TYPE_HIGH     EQU  2
DEF ROW_A_TYPE_LOW      EQU  2
DEF ROW_A_PITCH         EQU  6
DEF ROW_A_VOL           EQU  8

DEF ROW_B_PITCH         EQU  ROW_A_PITCH
DEF ROW_B_VOL           EQU  ROW_A_VOL

DEF ROW_CH4_LEN         EQU 11
DEF ROW_CH4_LEN_HIGH    EQU 11
DEF ROW_CH4_LEN_LOW     EQU 11
DEF ROW_CH4_WIDTH       EQU 11
DEF ROW_CH4_DIV         EQU 11
DEF ROW_CH4_PITCH       EQU 14
DEF ROW_CH4_VOL         EQU 16
DEF ROW_CH4_DIR         EQU 18
DEF ROW_CH4_PACE        EQU 18

DEF COL_A_TYPE          EQU  4
DEF COL_A_TYPE_HIGH     EQU  4
DEF COL_A_TYPE_LOW      EQU  6
DEF COL_A_NAME          EQU  9
DEF COL_A_PITCH         EQU  4
DEF COL_A_VOL           EQU  4

DEF COL_B_TYPE          EQU COL_A_TYPE  + SCREEN_WIDTH
DEF COL_B_NAME          EQU COL_A_NAME  + SCREEN_WIDTH
DEF COL_B_PITCH         EQU COL_A_PITCH + 4
DEF COL_B_VOL           EQU COL_A_VOL   + 4

DEF COL_CH4_LEN_HIGH    EQU  6
DEF COL_CH4_LEN_LOW     EQU  8
DEF COL_CH4_WIDTH       EQU 12
DEF COL_CH4_DIV         EQU 17
DEF COL_CH4_PITCH       EQU  4
DEF COL_CH4_VOL         EQU  4
DEF COL_CH4_PACE        EQU  4
DEF COL_CH4_DIR         EQU 16

DEF COL_LICENSED        EQU  6

DEF WID_A_PITCH         EQU 16
DEF WID_A_VOL           EQU 16
DEF WID_B_VOL           EQU 12
DEF WID_CH4_PITCH       EQU 16
DEF WID_CH4_VOL         EQU 16
DEF WID_CH4_DIR         EQU  4
DEF WID_CH4_PACE        EQU  8

DEF LABEL_PITCH_SIZE    EQU  3
DEF LABEL_VOL_SIZE      EQU  3
DEF LABEL_LEN_SIZE      EQU  2
DEF LABEL_BITS_SIZE     EQU  2
DEF LABEL_DIV_SIZE      EQU  2
DEF LABEL_ENV_SIZE      EQU  3
DEF LABEL_DIR_SIZE      EQU  2

DEF OBJ_TOP_START       EQU  0

DEF OBJ_A_START         EQU OBJ_TOP_START
DEF OBJ_A_PITCH         EQU OBJ_A_START
DEF OBJ_A_VOL           EQU OBJ_A_PITCH   + 4
DEF OBJ_A_END           EQU OBJ_A_VOL     + 4

DEF OBJ_B_START         EQU OBJ_A_END
DEF OBJ_B_PITCH         EQU OBJ_B_START
DEF OBJ_B_VOL           EQU OBJ_B_PITCH   + 4
DEF OBJ_B_END           EQU OBJ_B_VOL     + 4
DEF OBJ_TOP_END         EQU OBJ_B_END

DEF OBJ_BOTTOM_START    EQU OBJ_TOP_END
DEF OBJ_CH4_START       EQU OBJ_TOP_END
DEF OBJ_CH4_WIDTH       EQU OBJ_TOP_END
DEF OBJ_CH4_PITCH       EQU OBJ_CH4_WIDTH   + 2
DEF OBJ_CH4_VOL         EQU OBJ_CH4_PITCH   + 1
DEF OBJ_CH4_DIR         EQU OBJ_CH4_VOL     + 1
DEF OBJ_CH4_PACE        EQU OBJ_CH4_DIR     + 2
DEF OBJ_CH4_SEL_END     EQU OBJ_CH4_PACE    + 1

DEF OBJ_LABEL_PITCH     EQU OBJ_CH4_PACE    + 1
DEF OBJ_LABEL_VOL       EQU OBJ_LABEL_PITCH + LABEL_PITCH_SIZE
DEF OBJ_LABEL_ENV       EQU OBJ_LABEL_VOL   + LABEL_VOL_SIZE
DEF OBJ_LABEL_DIR       EQU OBJ_LABEL_ENV   + LABEL_ENV_SIZE
DEF OBJ_LABEL_BITS      EQU OBJ_LABEL_DIR   + LABEL_DIR_SIZE
DEF OBJ_LABEL_DIV       EQU OBJ_LABEL_BITS  + LABEL_BITS_SIZE
DEF OBJ_CH4_END         EQU OBJ_LABEL_DIV   + LABEL_DIV_SIZE
DEF OBJ_BOTTOM_END      EQU OBJ_CH4_END

DEF OBJ_DIGIT_DIV       EQU OAM_COUNT
DEF OBJ_DIGIT_HIGH      EQU OBJ_DIGIT_DIV   + 1
DEF OBJ_DIGIT_LOW       EQU OBJ_DIGIT_HIGH  + 1

DEF OBJ_OFFSET          EQU OBJ_CH4_END

DEF OBJ_ARROW_UP        EQU OBJ_OFFSET
DEF OBJ_ARROW_DOWN      EQU OBJ_ARROW_UP  + 1

ASSERT(OBJ_ARROW_DOWN + 1 == OAM_COUNT)

DEF B_ODD                EQU  0
DEF B_LOGO               EQU  1
DEF B_DISABLED           EQU  2
DEF B_OBJ                EQU  2
DEF B_BOTTOM             EQU  3
DEF B_ROW                EQU  5
DEF B_CIRCLE             EQU  5
DEF B_DIGIT_RIGHT        EQU  5
DEF B_DIGIT              EQU  7

DEF T_DIGIT              EQU   1 << B_DIGIT

DEF T_BRD_LEFT           EQU $1E
DEF T_BRD_RIGHT          EQU $1F
DEF T_BRD_TOP_LEFT       EQU $20
DEF T_DOT_TOP_BTM_LEFT   EQU $23

DEF T_BRD_TOP            EQU $C0
DEF T_BRD_BOTTOM         EQU $C1
DEF T_DOT_BTM_TOP_LEFT   EQU $C2
DEF T_DOT_DBL_LEFT       EQU $C3
DEF T_BRD_BOTTOM_LEFT    EQU $C4
DEF T_BRD_BOTTOM_RIGHT   EQU $C5
DEF T_BRD_DOT_BTM_RIGHT  EQU $C6
DEF T_BRD_TOP_RIGHT      EQU $C7

DEF T_DOT_TOP_BTM_RIGHT  EQU $C8
DEF T_DOT_TOP_RIGHT      EQU $C9
DEF T_DOT_RIGHT_TOP_LEFT EQU $CA
DEF T_DOT_RIGHT_BTM_LEFT EQU $CB
DEF T_DOT_RIGHT_DBL_LEFT EQU $CC
DEF T_BRD_TOP_BTM_RIGHT  EQU $CD
DEF T_BRD_TOP_BOTTOM     EQU $CE
DEF T_BRD_LEFT_RIGHT     EQU $CF

DEF T_PUSHB_HEX          EQU $40
DEF T_PUSHB_LOW          EQU $50
DEF T_PUSHB_MED_LOW      EQU $54

DEF T_PUSHB_MED          EQU $60
DEF T_PUSHB_WIDTH        EQU $65
DEF T_PUSHB_DIR          EQU $6A
DEF T_PUSHB_DISABLE      EQU $6E
DEF T_PUSHB_ENABLE       EQU $6F

DEF T_SEL_HEX            EQU $40
DEF T_SEL_LOW            EQU $50

DEF T_LABEL_A            EQU $6C
DEF T_LABEL_B            EQU $6D
DEF T_LABEL_CH4          EQU $7F

DEF T_SEL_CH4_WIDTH      EQU $64
DEF T_ARROW_UP           EQU $68
DEF T_ARROW_LEFT         EQU $69
DEF T_SEL_CH4_DIR        EQU $6A
DEF T_SEL_DISABLE        EQU $6E
DEF T_SEL_ENABLE         EQU $6F

DEF T_LABEL_BITS         EQU $7C
DEF T_LABEL_DIV          EQU $7E

DEF T_LABEL_PITCH        EQU $70
DEF T_LABEL_VOL          EQU T_LABEL_PITCH + LABEL_PITCH_SIZE
DEF T_LABEL_ENV          EQU T_LABEL_VOL   + LABEL_VOL_SIZE
DEF T_LABEL_DIR          EQU T_LABEL_ENV   + 4
DEF T_LABEL_LEN1         EQU $76
DEF T_LABEL_LEN2         EQU $78

DEF T_SEL_CH4_PITCH      EQU T_SEL_HEX
DEF T_SEL_CH4_VOL        EQU T_SEL_HEX
DEF T_SEL_CH4_PACE       EQU T_SEL_HEX

DEF T_LABEL_VOL1         EQU T_LABEL_VOL
DEF T_LABEL_PITCH1       EQU T_LABEL_PITCH

DEF T_DIGIT_DIV          EQU $DC
DEF T_DIGIT_HIGH         EQU $E0
DEF T_DIGIT_LOW          EQU $E4

DEF T_LOGO1              EQU $E8
DEF T_LOGO2              EQU $F4

DEF MSG_WIDTH            EQU 14

DEF FINAL_SCY            EQU  0
DEF FINAL_WY             EQU 64
DEF INIT_SCY             EQU - SCREEN_HEIGHT_PX
DEF INIT_WY              EQU INIT_SCY + FINAL_WY
DEF PASS_SCY             EQU FINAL_SCY + 8
DEF PASS_WY              EQU FINAL_WY  + 8

DEF B_SOUND_B            EQU  2
DEF B_CH4                EQU  3
DEF B_SOUND_MUTE         EQU  7

DEF B_TYPE_NONE          EQU  2
DEF B_TYPE_LOGO          EQU  3

DEF TYPE_NONE            EQU  1 << B_TYPE_NONE
DEF TYPE_LOGO            EQU  1 << B_TYPE_LOGO

DEF TRANS_LENGTH         EQU  8

; https://github.com/gbdev/hardware.inc/pull/75
DEF BOOTUP_B_DMG0        EQU $FF

; https://github.com/gbdev/hardware.inc/pull/77
DEF SGB_SOUND            EQU  $08 << 3
